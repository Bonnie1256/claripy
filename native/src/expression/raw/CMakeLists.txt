# Add current directory's source files
target_sources("${SHARED_LIB_NAME}" PRIVATE
	symbolic.cpp
	concrete.cpp
	base.cpp
)

# Add type sources
add_subdirectory(type)

# Define all Ops that should have their subclasses autogenerated
# We set this list to empty and expect the ops subdirectory to edit it
set(OPS "")

# Add op sources
# Additionally, OPS should be edited
add_subdirectory(op)

# Configure each autogen'd file
foreach(OP ${OPS})
	set(EXPRESSION_OP "${OP}")
	string(TOLOWER "${OP}" EXPRESSION_OP_LOWER)
	# Configure header
	set(IN_HEADER "${CMAKE_CURRENT_SOURCE_DIR}/op_template.hpp.in")
	set(OUT_HEADER "${CMAKE_CURRENT_SOURCE_DIR}/autogen/${EXPRESSION_OP_LOWER}.hpp")
	configure_file("${IN_HEADER}" "${OUT_HEADER}" @ONLY)
	# Configure source
	set(IN_SOURCE "${CMAKE_CURRENT_SOURCE_DIR}/op_template.cpp.in")
	set(OUT_SOURCE "${CMAKE_CURRENT_SOURCE_DIR}/autogen/${EXPRESSION_OP_LOWER}.cpp")
	configure_file("${IN_SOURCE}" "${OUT_SOURCE}" @ONLY)
	# Add out the souce to the shared library
	target_sources("${SHARED_LIB_NAME}" PRIVATE "${OUT_SOURCE}")
endforeach()
